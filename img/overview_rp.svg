<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="271.8px" preserveAspectRatio="none" style="width:439px;height:271px;" version="1.1" viewBox="0 0 439 271" width="439.2px" zoomAndPan="magnify"><defs><filter height="300%" id="fedwyagg9xuuo" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.4" dy="2.4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="265.0734" style="stroke:#A80036;stroke-width:0.6;" width="343.2" x="0.6" y="3.6"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="61.8" x="141.3" y="10.8401">Client Domain</text><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="32.4" x2="32.4" y1="65.0578" y2="216.8953"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="248.4" x2="248.4" y1="65.0578" y2="216.8953"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="310.2" x2="310.2" y1="65.0578" y2="216.8953"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="393" x2="393" y1="65.0578" y2="216.8953"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="55.8" x="3" y="63.0768">Relying Party</text><ellipse cx="32.7" cy="21.0797" fill="#FEFECE" filter="url(#fedwyagg9xuuo)" rx="4.8" ry="4.8" style="stroke:#A80036;stroke-width:1.2;"/><path d="M32.7,25.8797 L32.7,42.0797 M24.9,30.6797 L40.5,30.6797 M32.7,42.0797 L24.9,51.0797 M32.7,42.0797 L40.5,51.0797 " fill="none" filter="url(#fedwyagg9xuuo)" style="stroke:#A80036;stroke-width:1.2;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="55.8" x="3" y="224.0924">Relying Party</text><ellipse cx="32.7" cy="232.0734" fill="#FEFECE" filter="url(#fedwyagg9xuuo)" rx="4.8" ry="4.8" style="stroke:#A80036;stroke-width:1.2;"/><path d="M32.7,236.8734 L32.7,253.0734 M24.9,241.6734 L40.5,241.6734 M32.7,253.0734 L24.9,262.0734 M32.7,253.0734 L40.5,262.0734 " fill="none" filter="url(#fedwyagg9xuuo)" style="stroke:#A80036;stroke-width:1.2;"/><rect fill="#FEFECE" filter="url(#fedwyagg9xuuo)" height="18.1781" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="46.2" x="224.4" y="43.8797"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="37.8" x="228.6" y="55.8768">Vault API</text><rect fill="#FEFECE" filter="url(#fedwyagg9xuuo)" height="18.1781" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="46.2" x="224.4" y="216.2953"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="37.8" x="228.6" y="228.2924">Vault API</text><rect fill="#FEFECE" filter="url(#fedwyagg9xuuo)" height="18.1781" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="60" x="279" y="43.8797"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="51.6" x="283.2" y="55.8768">Comparator</text><rect fill="#FEFECE" filter="url(#fedwyagg9xuuo)" height="18.1781" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="60" x="279" y="216.2953"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="51.6" x="283.2" y="228.2924">Comparator</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="87.6" x="347.4" y="63.0768">Authorization Server</text><ellipse cx="393" cy="21.0797" fill="#FEFECE" filter="url(#fedwyagg9xuuo)" rx="4.8" ry="4.8" style="stroke:#A80036;stroke-width:1.2;"/><path d="M393,25.8797 L393,42.0797 M385.2,30.6797 L400.8,30.6797 M393,42.0797 L385.2,51.0797 M393,42.0797 L400.8,51.0797 " fill="none" filter="url(#fedwyagg9xuuo)" style="stroke:#A80036;stroke-width:1.2;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="87.6" x="347.4" y="224.0924">Authorization Server</text><ellipse cx="393" cy="232.0734" fill="#FEFECE" filter="url(#fedwyagg9xuuo)" rx="4.8" ry="4.8" style="stroke:#A80036;stroke-width:1.2;"/><path d="M393,236.8734 L393,253.0734 M385.2,241.6734 L400.8,241.6734 M393,253.0734 L385.2,262.0734 M393,253.0734 L400.8,262.0734 " fill="none" filter="url(#fedwyagg9xuuo)" style="stroke:#A80036;stroke-width:1.2;"/><polygon fill="#A80036" points="385.8,81.3375,391.8,83.7375,385.8,86.1375,388.2,83.7375" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="32.7" x2="389.4" y1="83.7375" y2="83.7375"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="60.6" x="36.9" y="80.6979">OAuth2 request</text><polygon fill="#A80036" points="39.3,98.8172,33.3,101.2172,39.3,103.6172,36.9,101.2172" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="35.7" x2="392.4" y1="101.2172" y2="101.2172"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="49.8" x="42.9" y="98.1776">OAuth2 code</text><polygon fill="#A80036" points="385.8,116.2969,391.8,118.6969,385.8,121.0969,388.2,118.6969" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="32.7" x2="389.4" y1="118.6969" y2="118.6969"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="18.6" x="36.9" y="115.6573">code</text><polygon fill="#A80036" points="39.3,133.7766,33.3,136.1766,39.3,138.5766,36.9,136.1766" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="35.7" x2="392.4" y1="136.1766" y2="136.1766"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="66" x="42.9" y="133.137">access_token_as</text><polygon fill="#A80036" points="241.5,151.2563,247.5,153.6563,241.5,156.0563,243.9,153.6563" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="32.7" x2="245.1" y1="153.6563" y2="153.6563"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="201.6" x="36.9" y="150.6167">authorize comparator to read a document in a vault</text><polygon fill="#A80036" points="39.3,168.7359,33.3,171.1359,39.3,173.5359,36.9,171.1359" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="35.7" x2="248.1" y1="171.1359" y2="171.1359"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="64.8" x="42.9" y="168.0964">access_token_rp</text><polygon fill="#A80036" points="303,186.2156,309,188.6156,303,191.0156,305.4,188.6156" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="32.7" x2="306.6" y1="188.6156" y2="188.6156"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="201.6" x="36.9" y="185.5761">do comparison (access_token_as, access_token_rp)</text><polygon fill="#A80036" points="39.3,203.6953,33.3,206.0953,39.3,208.4953,36.9,206.0953" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="35.7" x2="309.6" y1="206.0953" y2="206.0953"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="126" x="42.9" y="203.0558">comparison result (true or false)</text><!--MD5=[900a506ffd1801386f5b896f05867973]
@startuml

box "Client Domain"
  actor "Relying Party" as rp
  participant "Vault API" as vapi
  participant Comparator as comp
end box

actor "Authorization Server" as as

rp -> as : OAuth2 request
as -> rp : OAuth2 code
rp -> as : code
as -> rp : access_token_as
rp -> vapi : authorize comparator to read a document in a vault
vapi -> rp : access_token_rp
rp -> comp : do comparison (access_token_as, access_token_rp)
comp -> rp : comparison result (true or false)

@enduml

PlantUML version 1.2021.00(Sun Jan 10 05:25:05 EST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: CA
--></g></svg>