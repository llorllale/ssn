<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="271.8px" preserveAspectRatio="none" style="width:360px;height:271px;" version="1.1" viewBox="0 0 360 271" width="360px" zoomAndPan="magnify"><defs><filter height="300%" id="f1tr63y7jue7cu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.4" dy="2.4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="265.0734" style="stroke:#A80036;stroke-width:0.6;" width="264.3" x="0.6" y="3.6"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacing" textLength="61.8" x="101.85" y="10.8401">Client Domain</text><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="32.4" x2="32.4" y1="65.0578" y2="216.8953"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="116.4" x2="116.4" y1="65.0578" y2="216.8953"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="231.3" x2="231.3" y1="65.0578" y2="216.8953"/><line style="stroke:#A80036;stroke-width:0.6;stroke-dasharray:5.0,5.0;" x1="314.1" x2="314.1" y1="65.0578" y2="216.8953"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="55.8" x="3" y="63.0768">Relying Party</text><ellipse cx="32.7" cy="21.0797" fill="#FEFECE" filter="url(#f1tr63y7jue7cu)" rx="4.8" ry="4.8" style="stroke:#A80036;stroke-width:1.2;"/><path d="M32.7,25.8797 L32.7,42.0797 M24.9,30.6797 L40.5,30.6797 M32.7,42.0797 L24.9,51.0797 M32.7,42.0797 L40.5,51.0797 " fill="none" filter="url(#f1tr63y7jue7cu)" style="stroke:#A80036;stroke-width:1.2;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="55.8" x="3" y="224.0924">Relying Party</text><ellipse cx="32.7" cy="232.0734" fill="#FEFECE" filter="url(#f1tr63y7jue7cu)" rx="4.8" ry="4.8" style="stroke:#A80036;stroke-width:1.2;"/><path d="M32.7,236.8734 L32.7,253.0734 M24.9,241.6734 L40.5,241.6734 M32.7,253.0734 L24.9,262.0734 M32.7,253.0734 L40.5,262.0734 " fill="none" filter="url(#f1tr63y7jue7cu)" style="stroke:#A80036;stroke-width:1.2;"/><rect fill="#FEFECE" filter="url(#f1tr63y7jue7cu)" height="18.1781" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="78.6" x="76.2" y="43.8797"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="70.2" x="80.4" y="55.8768">Membership Svc</text><rect fill="#FEFECE" filter="url(#f1tr63y7jue7cu)" height="18.1781" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="78.6" x="76.2" y="216.2953"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="70.2" x="80.4" y="228.2924">Membership Svc</text><rect fill="#FEFECE" filter="url(#f1tr63y7jue7cu)" height="18.1781" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="60" x="200.1" y="43.8797"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="51.6" x="204.3" y="55.8768">Comparator</text><rect fill="#FEFECE" filter="url(#f1tr63y7jue7cu)" height="18.1781" style="stroke:#A80036;stroke-width:0.8999999999999999;" width="60" x="200.1" y="216.2953"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="51.6" x="204.3" y="228.2924">Comparator</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="87.6" x="268.5" y="63.0768">Authorization Server</text><ellipse cx="314.1" cy="21.0797" fill="#FEFECE" filter="url(#f1tr63y7jue7cu)" rx="4.8" ry="4.8" style="stroke:#A80036;stroke-width:1.2;"/><path d="M314.1,25.8797 L314.1,42.0797 M306.3,30.6797 L321.9,30.6797 M314.1,42.0797 L306.3,51.0797 M314.1,42.0797 L321.9,51.0797 " fill="none" filter="url(#f1tr63y7jue7cu)" style="stroke:#A80036;stroke-width:1.2;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="87.6" x="268.5" y="224.0924">Authorization Server</text><ellipse cx="314.1" cy="232.0734" fill="#FEFECE" filter="url(#f1tr63y7jue7cu)" rx="4.8" ry="4.8" style="stroke:#A80036;stroke-width:1.2;"/><path d="M314.1,236.8734 L314.1,253.0734 M306.3,241.6734 L321.9,241.6734 M314.1,253.0734 L306.3,262.0734 M314.1,253.0734 L321.9,262.0734 " fill="none" filter="url(#f1tr63y7jue7cu)" style="stroke:#A80036;stroke-width:1.2;"/><polygon fill="#A80036" points="109.5,81.3375,115.5,83.7375,109.5,86.1375,111.9,83.7375" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="32.7" x2="113.1" y1="83.7375" y2="83.7375"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="69.6" x="36.9" y="80.6979">GET /membership</text><polygon fill="#A80036" points="39.3,98.8172,33.3,101.2172,39.3,103.6172,36.9,101.2172" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="35.7" x2="116.1" y1="101.2172" y2="101.2172"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="62.4" x="42.9" y="98.1776">membership VC</text><polygon fill="#A80036" points="306.9,116.2969,312.9,118.6969,306.9,121.0969,309.3,118.6969" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="32.7" x2="310.5" y1="118.6969" y2="118.6969"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="266.4" x="36.9" y="115.6573">GET /oauth2/authorize?client_id=123&amp;_mem=base64url-encode(vc)</text><polygon fill="#A80036" points="39.3,133.7766,33.3,136.1766,39.3,138.5766,36.9,136.1766" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="35.7" x2="313.5" y1="136.1766" y2="136.1766"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="125.4" x="42.9" y="133.137">GET /oauth2/callback?code=xyz</text><polygon fill="#A80036" points="306.9,151.2563,312.9,153.6563,306.9,156.0563,309.3,153.6563" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="32.7" x2="310.5" y1="153.6563" y2="153.6563"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="183.6" x="36.9" y="150.6167">POST /oauth2/token {authorization_code=xyz}</text><polygon fill="#A80036" points="39.3,168.7359,33.3,171.1359,39.3,173.5359,36.9,171.1359" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="35.7" x2="313.5" y1="171.1359" y2="171.1359"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="52.8" x="42.9" y="168.0964">access_token</text><polygon fill="#A80036" points="224.1,186.2156,230.1,188.6156,224.1,191.0156,226.5,188.6156" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="32.7" x2="227.7" y1="188.6156" y2="188.6156"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="184.2" x="36.9" y="185.5761">POST /compare {vaultID, docID, access_token}</text><polygon fill="#A80036" points="39.3,203.6953,33.3,206.0953,39.3,208.4953,36.9,206.0953" style="stroke:#A80036;stroke-width:0.6;"/><line style="stroke:#A80036;stroke-width:0.6;" x1="35.7" x2="230.7" y1="206.0953" y2="206.0953"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="47.4" x="42.9" y="203.0558">true or false</text><!--MD5=[25dacb8426688c4ad4bb4df3ab040bdd]
@startuml

box "Client Domain"
  actor "Relying Party" as rp
  participant "Membership Svc" as memsvc
  participant Comparator as comp
end box

actor "Authorization Server" as as

rp -> memsvc : GET /membership
memsvc -> rp : membership VC
rp -> as : GET /oauth2/authorize?client_id=123&_mem=base64url-encode(vc)
as -> rp : GET /oauth2/callback?code=xyz
rp -> as : POST /oauth2/token {authorization_code=xyz}
as -> rp : access_token
rp -> comp : POST /compare {vaultID, docID, access_token}
comp -> rp : true or false

@enduml

PlantUML version 1.2021.00(Sun Jan 10 05:25:05 EST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: CA
--></g></svg>